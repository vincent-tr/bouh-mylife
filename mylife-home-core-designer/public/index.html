<!DOCTYPE html>
<html ng-app="mylife.app">
<head>
<meta charset="ISO-8859-1">
<title>mylife-home-core-designer</title>

<script src="lib/jquery/jquery.js"></script>
<script src="lib/jquery/jquery-ui.js"></script>
<script src="lib/jsplumb/jquery.jsPlumb.js"></script>
<!--  <script src="lib/bootstrap/js/bootstrap.js"></script>  -->
<script src="lib/angular/angular.js"></script>
<!--  <script src="lib/angular/angular-route.js"></script>  -->
<script src="lib/angular/angular-resource.js"></script>
<!--  <script src="lib/angular/ui-bootstrap-tpls.js"></script>  -->

<script src="app/app.js"></script>
<script src="app/api.js"></script>

<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css">
<!--  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap-theme.css">  -->
<link rel="stylesheet" href="css/app.css">

</head>
<body ng-controller="designerController">

	<div id="main">
		<div id="toolbox-container">
			<div plumb-toolbox-item class="toolbox-item" ng-repeat="type in pluginTypes"
				data-identifier="{{type.id}}" draggable title="{{type.displayName}}">
				<span class="toolbox-item-title">{{type.displayName}}</span>
				<img class="toolbox-item-image" src="{{type.imageUrl}}" height="48" width="48"></img>
			</div>
		</div>
		<div id="container" class="drop-container" ng-click="addEvent($event)" droppable>
			<div plumb-schema-item class="item" ng-repeat="plugin in plugins" ng-style="{ 'left':plugin.designer.x, 'top':plugin.designer.y }"
				data-identifier="{{plugin.id}}">
				<div class="title">{{plugin.id}}</div>
				<div ng-repeat="(key, value) in plugin.parameters">
					{{key}} : {{value}}<br/>
				</div>
				<div ng-repeat="member in plugin.internal.type.class.members | filter:{membertype:'attribute'}">
					<div component-attribute class="component-attribute">{{member.name}}</div>
				</div>
				<div ng-repeat="member in plugin.internal.type.class.members | filter:{membertype:'action'}">
					<div component-action class="component-action">{{member.name}}</div>
				</div>
			</div>
			<div plumb-schema-item class="item" ng-repeat="hwitem in hardware" ng-style="{ 'left':hwitem.designer.x, 'top':hwitem.designer.y }"
				data-identifier="{{hwitem.id}}">
				<div class="title">{{hwitem.id}}</div>
				<div ng-repeat="member in hwitem.class.members | filter:{membertype:'attribute'}">
					<div component-attribute class="component-attribute">{{member.name}}</div>
				</div>
				<div ng-repeat="member in hwitem.class.members | filter:{membertype:'action'}">
					<div component-action class="component-action">{{member.name}}</div>
				</div>
			</div>
		</div>
	</div>

	<p>
		<button type="button" class="btn btn-primary" ng-click="reload()">Annuler</button>
		<button type="button" class="btn btn-primary" ng-click="save()">Enregistrer</button>
	</p>

	<!--  does not render what comes behind it, so it's probably wrong -->
	<div post-render></div>

</body>
</html>
