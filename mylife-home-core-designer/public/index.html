<!DOCTYPE html>
<html ng-app="mylife.app">
<head>
<meta charset="ISO-8859-1">
<title>mylife-home-core-designer</title>

<script src="lib/jquery/jquery.js"></script>
<script src="lib/jquery/jquery-ui.js"></script>
<link rel="stylesheet" href="lib/jquery/themes/smoothness/jquery-ui.css">
<script src="lib/jsplumb/jquery.jsPlumb.js"></script>
<!--  <script src="lib/bootstrap/js/bootstrap.js"></script>  -->
<script src="lib/angular/angular.js"></script>
<!--  <script src="lib/angular/angular-route.js"></script>  -->
<script src="lib/angular/angular-resource.js"></script>
<!--  <script src="lib/angular/ui-bootstrap-tpls.js"></script>  -->

<script src="app/app.js"></script>
<script src="app/api.js"></script>

<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css">
<!--  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap-theme.css">  -->
<link rel="stylesheet" href="css/app.css">

</head>
<body ng-controller="designerController">

	<div id="main">
		<div id="leftpane" splitter="vertical">
			<div id="toolbox-container" splitter="horizontal">
				<div id="toolbox">
					<div class="toolbox-item" toolbox-item data-identifier="{{type.id}}" title="{{type.displayName}}" ng-repeat="type in pluginTypes">
						<span class="toolbox-item-title">{{type.displayName}}</span>
						<img class="toolbox-item-image" src="{{type.imageUrl}}" height="48" width="48"></img>
					</div>
				</div>
			</div>
			<div id="propertybox-container">
				<div id="propertybox">
					<div id="propertybox-wrapper">
						<div class="propertybox-title">
							<img ng-show="selectedComponent.internal.type" class="item-image" src="{{selectedComponent.internal.type.imageUrl}}" title="{{selectedComponent.internal.type.displayName}}"></img>
							<img ng-show="selectedComponent&&!selectedComponent.internal.type" class="item-image" src="images/hardware.jpeg" title="Matériel"></img>
							<span>{{selectedComponent.id}}</span>
							<span ng-show="!selectedComponent">Pas de selection</span>
						</div>
						<table ng-show="selectedComponent.internal.type">
							<thead>
								<tr>
									<th>Nom</th>
									<th>Valeur</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>ID</td>
									<td><input type="text" ng-model="selectedComponent.id"></input></td>
								</tr>
								<tr ng-repeat="(key, value) in selectedComponent.parameters">
									<td>{{key}}</td>
									<td><input type="text" ng-model="value"></input></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
		<div id="schema-container" class="drop-container" ng-click="addEvent($event)" schema-container>
			<div class="item" schema-id="plugin:{{plugin.id}}" ng-repeat="plugin in plugins" ng-style="{ 'left':plugin.designer.x, 'top':plugin.designer.y }"
				data-identifier="{{plugin.id}}" schema-item>
				<div class="item-title">
					<img class="item-image" src="{{plugin.internal.type.imageUrl}}" title="{{plugin.internal.type.displayName}}"></img>
					<span>{{plugin.id}}</span>
				</div>
				<div ng-repeat="(key, value) in plugin.parameters">
					<div class="component-parameter" title="Paramètre">{{key}} : {{value}}</div>
				</div>
				<div ng-repeat="member in plugin.internal.type.class.members | filter:{membertype:'attribute'}">
					<div schema-id="attribute:{{plugin.id}}:{{member.name}}" class="component-attribute" title="{{memberTitle(member)}}" component-attribute>{{member.name}}</div>
				</div>
				<div ng-repeat="member in plugin.internal.type.class.members | filter:{membertype:'action'}">
					<div schema-id="action:{{plugin.id}}:{{member.name}}" class="component-action" title="{{memberTitle(member)}}" component-action>{{member.name}}</div>
				</div>
			</div>
			<div class="item" schema-id="hardware:{{hwitem.id}}" ng-repeat="hwitem in hardware" ng-style="{ 'left':hwitem.designer.x, 'top':hwitem.designer.y }"
				data-identifier="{{hwitem.id}}" schema-item>
				<div class="item-title">
					<img class="item-image" src="images/hardware.jpeg" title="Matériel"></img>
					<span>{{hwitem.id}}</span>
				</div>
				<div ng-repeat="member in hwitem.class.members | filter:{membertype:'attribute'}">
					<div schema-id="attribute:{{plugin.id}}:{{member.name}}" class="component-attribute" title="{{memberTitle(member)}}" component-attribute>{{member.name}}</div>
				</div>
				<div ng-repeat="member in hwitem.class.members | filter:{membertype:'action'}">
					<div schema-id="action:{{plugin.id}}:{{member.name}}" class="component-action" title="{{memberTitle(member)}}" component-action>{{member.name}}</div>
				</div>
			</div>
			<div schema-id="link:{{link.id}}" ng-repeat="link in links" schema-link></div>
		</div>
	</div>
	
	<div id="commands">
		<button type="button" class="btn btn-primary" ng-click="reload()">Annuler</button>
		<button type="button" class="btn btn-primary" ng-click="save()">Enregistrer</button>
	</div>

	<!--  does not render what comes behind it, so it's probably wrong -->
	<div initializer></div>

</body>
</html>
